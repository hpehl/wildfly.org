<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Using the management console on OpenShift</title>
  <meta name="description" content="How to use the management console for WildFly instances running on OpenShift.">
  <link rel="me" href="https://fosstodon.org/@wildflyas" />
  <link rel="shortcut icon" type="image/png" href="/wildfly.org//favicon.ico" >
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/base16/atelier-dune-light.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/protobuf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/dockerfile.min.js"></script>
  <link rel="stylesheet" href="/wildfly.org/assets/css/main.css" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40221748-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-40221748-1');
  </script>

  

</head>

<body class="Using the management console on OpenShift">
  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildfly.org//"><img class="wf-logo" src="/wildfly.org//assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildfly.org//news/" class="active">News</a>
        </li>
        <li>
          <a href="/wildfly.org//about/" class="">About</a>
        </li>
        <li>
          <a href="/wildfly.org//contribute/" class="">Contribute</a>
        </li>
        <li>
            <a target="_blank" href="https://docs.wildfly.org">Docs</a>
        </li>
        <li>
          <a href="/wildfly.org//guides/" class="">Guides</a>
        </li>
        <li>
          <a href="/wildfly.org//events/" class="">Events</a>
        </li>
        <li>
          <a href="/wildfly.org//downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildfly.org//security/" class="">CVE Reporting</a>
        </li>
        <li>
          <a href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
        <li>
          <a class="button-cta secondary " href="/wildfly.org//get-started/">Get Started</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="post-page grid-wrapper">
  <div class="grid__item width-10-12">
    <h1 class="title">Using the management console on OpenShift</h1>
    
    
    

    <p>
      
        
          
          <p class="byline">
            
              <img class="avatar" height="60px" width="60px" src="/assets/img/authors/hpehl.jpg"/>
            

            By Harald Pehl
            
              | December 18, 2024
            
          </p>
        
      
    </p>
  </div>
  <div class="grid__item width-10-12 doc-content">
    
    <div class="paragraph">
<p>In this blog post I&#8217;d like to show how you can use the management console (aka <a href="https://hal.github.io">HAL</a>) for WildFly instances running on OpenShift.</p>
</div>
<div class="sect1">
<h2 id="prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The console is an integral part of WildFly and is activated by default when running on-premise. For instances running on OpenShift, the console is not available by default, though. To use the console on OpenShift, you need a WildFly image that meets the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Management user:<br>
The management console is protected by default and requires a management user added with the <code>add-user.sh</code> script.</p>
</li>
<li>
<p>Public route to the management interface:<br>
The management interface has to be publicly available from the outside.</p>
</li>
<li>
<p>Allowed origin:<br>
The console uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch API</a> to talk to the management interface of a running WildFly instance. In an OpenShift environment, the origins of the public route and the management interface itself are different. That&#8217;s why we need to tell WildFly that it is ok to make requests to the management interface from another origin (see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS policies</a> for more details).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can build such an image on your own based on the official WildFly images available at <a href="https://quay.io/repository/wildfly/wildfly">quay.io/wildfly/wildfly</a> (see "Extending the image"). Another way is to use the pre-built images from <a href="https://quay.io/repository/halconsole/wildfly">quay.io/halconsole/wildfly</a>. These images are mainly meant for HAL development and testing but already meet these requirements, which makes them suitable for our use case. In particular the images add a management user <code>admin:admin</code> and have a list of preconfigured allowed origins.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The additions in the <a href="https://quay.io/repository/halconsole/wildfly">quay.io/halconsole/wildfly</a> images are <strong>only</strong> meant for <strong>development and testing</strong> purposes. Under <strong>no circumstances</strong> must this be <strong>used in production</strong>! Do not rely on the management user <code>admin:admin</code> or the preconfigured allowed origins.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add the allowed origin for the public route, we make use of the <a href="https://github.com/jmesnil/kubectl-jboss-cli/"><code>jboss-cli</code></a> <code>kubectl</code> plugin. This plugin makes it straightforward to connect to a WildFly instance running on OpenShift and execute CLI commands. Please visit <a href="https://github.com/jmesnil/kubectl-jboss-cli/" class="bare">https://github.com/jmesnil/kubectl-jboss-cli/</a> to find out how to install and use the plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="instructions">Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The steps below assume you have access to an OpenShift cluster and installed <code>kubectl</code> and the <code>jboss-cli</code> plugin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create application</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc new-app quay.io/halconsole/wildfly
oc create route edge --service wildfly --port 9990</code></pre>
</div>
</div>
</li>
<li>
<p>Add allowed origin</p>
<div class="paragraph">
<p>Use <code>oc get pods</code> to find the name of the pod to connect to and <code>oc get routes</code> to get the hostname of the public route to the management interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl jboss-cli -p &lt;pod&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Login using <code>admin:admin</code> and execute these CLI commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">/core-service=management/management-interface=http-interface:list-add(name=allowed-origins,value=https://&lt;hostname&gt;)
reload
exit</code></pre>
</div>
</div>
</li>
<li>
<p>Open the management console at <code>https://&lt;hostname&gt;</code> and login using <code>admin:admin</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="online-version-of-the-management-console">Online version of the management console</h3>
<div class="paragraph">
<p>As an alternative to adding the allowed origin, you can also use the online version of the management console available at <a href="https://hal.github.io/console" class="bare">https://hal.github.io/console</a>. This URL ships the latest version of the management console.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The management console is a single-page application (<a href="https://en.wikipedia.org/wiki/Single-page_application">SPA</a>) without any server side dependencies. As such, it can run on its own and connect to an arbitrary management interface. The online version of the console makes use of this fact. See <a href="https://hal.github.io/documentation/get-started/#standalone-mode" class="bare">https://hal.github.io/documentation/get-started/#standalone-mode</a> for more details.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the application as above and find the hostname of the public route using <code>oc get routes</code>.</p>
</li>
<li>
<p>Open <a href="https://hal.github.io/console" class="bare">https://hal.github.io/console</a></p>
</li>
<li>
<p>Add a management interface to the public route:</p>
<div class="paragraph">
<p>Give an arbitrary name, select <strong>https</strong> as a scheme, enter the hostname of the public route <em>without</em> https and port <strong>80</strong>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/wildfly.org//assets/img/news/hal/add-management-interface.png" alt="Add management interface">
</div>
</div>
</li>
<li>
<p>Click <strong>Add</strong> and then <strong>Connect</strong></p>
</li>
<li>
<p>Login using <code>admin:admin</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="things-to-keep-in-mind">Things to keep in mind</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please note that the above instructions are just a workaround to access the OpenShift management console as long as there is no more compatible, container-friendly way. In particular, the approach ignores some principles that should not be applied in a cloud environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Changing the management configuration of a pod is an antipattern as it will not outlive a pod restart. At that point, you&#8217;ll have to reconfigure the allowed origin.</p>
</li>
<li>
<p>With a route, you are accessing pods behind a service. If your deployments have multiple pods, it&#8217;s complex and hacky to access a specific pod or configure all pods.</p>
</li>
<li>
<p><strong>Do not use</strong> the <a href="https://quay.io/repository/halconsole/wildfly">quay.io/halconsole/wildfly</a> images <strong>in production</strong> under any circumstances. They contain preconfigured, insecure credentials and are meant only for development and testing purposes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="outlook">Outlook</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;re currently working on the <a href="https://github.com/hal/foundation">next-gen management console</a>. This version will also support a dedicated variant for OpenShift that will integrate with the OpenShift management console and addresses the limitations mentioned above. For more information you can watch the <a href="https://www.youtube.com/watch?v=Karu90yDIhs&amp;t=571s">talk</a> on the next-gen management console from the last <a href="https://www.wildfly.org/conference/">WildFly mini conference</a>, get the <a href="https://www.wildfly.org/assets/data/conference/202411_wmc_nextgen_console.pdf">slides</a> or reach out to us in the HAL Zulip <a href="https://wildfly.zulipchat.com/#narrow/channel/174373-hal">channel</a>.</p>
</div>
</div>
</div>
    
  </div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildfly.org//"><img class="wf-logo" src="/wildfly.org//assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is fully open. All components are open source and follow a community-focused development process.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/downloads">Downloads</a></li>
          
            <li><a href="https://docs.wildfly.org">Docs</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/wildfly">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://groups.google.com/forum/#!forum/wildfly">Join the forum</a></li>
          
            <li><a href="https://wildfly.zulipchat.com/">Join Zulip Chat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="https://github.com/ansible-middleware/wildfly">Ansible Collection for Wildfly</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://developers.redhat.com/products/codeready-studio/overview">CodeReady Studio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://quarkus.io/">Quarkus</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="https://weld.cdi-spec.org/">Weld</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="https://teiid.io/">Teiid</a></li>
          
            <li><a href="https://wildfly-security.github.io/wildfly-elytron/">WildFly Elytron</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/wildfly.org//assets/img/redhat_reversed.svg"></a>
    </span>
  </div>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildfly.org/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/wildfly.org/assets/javascript/random-color-picker.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
    hljs.highlightAll();
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
  <script type="text/javascript" src="/wildfly.org/assets/javascript/copy.js"></script>

</body>

</html>
