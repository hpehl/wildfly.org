<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Introducing Vertx Subsystem in WildFly Preview</title>
  <meta name="description" content="Learn about Vertx configuration in WildFly Preview 35">
  <link rel="me" href="https://fosstodon.org/@wildflyas" />
  <link rel="shortcut icon" type="image/png" href="/wildfly.org/favicon.ico" >
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/base16/atelier-dune-light.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/protobuf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/dockerfile.min.js"></script>
  <link rel="stylesheet" href="/wildfly.org/assets/css/main.css" />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40221748-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-40221748-1');
  </script>

  

</head>

<body class="Introducing Vertx Subsystem in WildFly Preview">
  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildfly.org/"><img class="wf-logo" src="/wildfly.org/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildfly.org/news/" class="active">News</a>
        </li>
        <li>
          <a href="/wildfly.org/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildfly.org/contribute/" class="">Contribute</a>
        </li>
        <li>
            <a target="_blank" href="https://docs.wildfly.org">Docs</a>
        </li>
        <li>
          <a href="/wildfly.org/guides/" class="">Guides</a>
        </li>
        <li>
          <a href="/wildfly.org/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildfly.org/security/" class="">CVE Reporting</a>
        </li>
        <li>
          <a href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
        <li>
          <a class="button-cta secondary " href="/wildfly.org/get-started/">Get Started</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="post-page grid-wrapper">
  <div class="grid__item width-10-12">
    <h1 class="title">Introducing Vertx Subsystem in WildFly Preview</h1>
    
    
    

    <p>
      
        <p class="byline">By Lin Gao | December 17, 2024</p>
      
    </p>
  </div>
  <div class="grid__item width-10-12 doc-content">
    
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;m excited to announce the integration of the <a href="https://github.com/wildfly-extras/wildfly-vertx-feature-pack" target="_blank" rel="noopener">WildFly Vertx Feature Pack</a> into WildFly Preview from WildFly 35 Beta release. This feature pack introduces Vertx configuration capabilities through the WildFly management model, making it easier to manage and integrate Vertx with existing WildFly subsystems.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In the 35 release, the vertx subsystem is only available in WildFly Preview, and not in standard WildFly. It is provided at the <a href="https://docs.wildfly.org/34/Admin_Guide.html#Feature_stability_levels" target="_blank" rel="noopener"><code>preview</code> stability level</a>, which is enabled out-of-the-box in WildFly Preview.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eclipse-vert-x-overview">Eclipse Vert.x Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/eclipse-vertx/vert.x/" target="_blank" rel="noopener">Eclipse Vert.x</a> is an open-source toolkit designed for building event-driven, asynchronous applications.</p>
</div>
<div class="paragraph">
<p>Currently, Vertx instances have been used by <code>opentelemetry</code> and <code>microprofile-reactive-messaging-smallrye</code> subsystems within WildFly to provide features powered by vertx components underneath, but there was no central mechanism to configure them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="key-features-of-the-wildfly-vertx-feature-pack">Key Features of the WildFly Vertx Feature Pack</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This feature pack provides centralized configuration and management of the Vertx instance, so administrators now have a unified way to define and manage the Vertx instance.</p>
</div>
<div class="paragraph">
<p>Following the recommendation from the Vert.x team, it is good to have a single Vertx instance for everything, which ensures optimal efficiency and simplicity.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Configurable VertxOptions</strong>: Administrators can define Vertx configurations using the WildFly management model, ensuring consistency across subsystems.</p>
</li>
<li>
<p><strong>Expose the Vertx Instance to CDI container</strong>: When administrators set up a Vertx instance in the vertx subsystem, it is exposed to the CDI container with a fixed qualifier, so other subsystems like opentelemetry and microprofile-reactive-messaging-smallrye can use it using CDI API.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-vertx-instance-in-wildfly-preview">Configuring Vertx instance in WildFly Preview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vertx instance in WildFly Preview is configured using the new <code>vertx</code> subsystem. This subsystem isn&#8217;t included in any of WildFly Preview&#8217;s out-of-the-box configuration files, so to use it you&#8217;ll need to add it to your configuration.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using a complete WildFly Preview installation, like the ones available from the <a href="https://wildfly.org/downloads" target="_blank" rel="noopener">WildFly downloads page</a>, then you can use the JBoss CLI to add the vertx extension and subsystem to your configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ /extension=org.wildfly.extension.vertx:add
$ /subsystem=vertx:add</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once <code>vertx</code> subsystem is added, you can define some VertxOptions and set up the Vertx instance to refer to the options you just configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ /subsystem=vertx/vertx-option=vo:add(event-loop-pool-size=20, max-eventloop-execute-time=5, max-eventloop-execute-time-unit=SECONDS)
$ /subsystem=vertx/vertx=vertx:add(option-name=vo)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the configuration like:</p>
</div>
<div class="listingblock">
<div class="title">standalone.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;subsystem xmlns="urn:wildfly:vertx:preview:1.0"&gt;
    &lt;vertx option-name="vo"/&gt;
    &lt;vertx-options&gt;
        &lt;vertx-option name="vo" event-loop-pool-size="20" max-eventloop-execute-time="5" max-eventloop-execute-time-unit="SECONDS"/&gt;
    &lt;/vertx-options&gt;
&lt;/subsystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more configuration, please refer to the <a href="https://github.com/wildfly-extras/wildfly-vertx-feature-pack/wiki/Configuration-Guide">Configuration-Guide</a> in the wildfly-vertx-feature-pack Wiki page.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-cases">Use Cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With above configuration, there is a Vertx instance exposed in CDI container with a qualifier, which has been integrated to opentelemetry subsystem (microprofile-reactive-messaging-smallrye subsystem soon) by setting the associated configuration item internally.</p>
</div>
<div class="paragraph">
<p>So when you play <a href="https://github.com/wildfly/quickstart/tree/35.0.0.Beta1/opentelemetry-tracing">opentelemetry-tracing</a> quickstart with the vertx configuration above, you will see a log message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[org.wildfly.extension.vertx] (default task-1) WFLYVTX0008: Use Vertx instance from vertx subsystem</code></pre>
</div>
</div>
<div class="paragraph">
<p>which indicates that the Vertx instance from the vertx subsystem is used underneath. The Vertx instance has <code>20</code> event loop threads set, and it will log a warning if it detects that event loop threads haven&#8217;t returned within <code>5 seconds</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="future-plan">Future plan</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>There is a plan to increase the stability level to <code>community</code> and finally to the <code>default</code> level to be used in the standalone WildFly distributions.</p>
</li>
<li>
<p>Now the vertx subsystem is integrated internally whenever it is available, maybe it is better to give the decisions to the administrators so that they can configure the opentelemetry subsystem and microprofile-reactive-messaging-smallrye subsystem to use or not the vertx instance coming from the vertx subsystem.</p>
</li>
<li>
<p>When this vertx subsystem becomes mature enough and higher stability level, we also consider to move it to WildFly codebase to align the release cycles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please try out the vertx subsystem in WildFly Preview and give us your feedback! We’ll continue to work on the integration, with a goal of including it in standard WildFly in one of the next couple of releases.</p>
</div>
</div>
</div>
    
  </div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildfly.org/"><img class="wf-logo" src="/wildfly.org/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is fully open. All components are open source and follow a community-focused development process.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/downloads">Downloads</a></li>
          
            <li><a href="https://docs.wildfly.org">Docs</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/wildfly">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://groups.google.com/forum/#!forum/wildfly">Join the forum</a></li>
          
            <li><a href="https://wildfly.zulipchat.com/">Join Zulip Chat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="https://github.com/ansible-middleware/wildfly">Ansible Collection for Wildfly</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://developers.redhat.com/products/codeready-studio/overview">CodeReady Studio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://quarkus.io/">Quarkus</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="https://weld.cdi-spec.org/">Weld</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="https://teiid.io/">Teiid</a></li>
          
            <li><a href="https://wildfly-security.github.io/wildfly-elytron/">WildFly Elytron</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/wildfly.org/assets/img/redhat_reversed.svg"></a>
    </span>
  </div>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildfly.org/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/wildfly.org/assets/javascript/random-color-picker.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
    hljs.highlightAll();
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
  <script type="text/javascript" src="/wildfly.org/assets/javascript/copy.js"></script>

</body>

</html>
